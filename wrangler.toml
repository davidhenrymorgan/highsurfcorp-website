name = "highsurfcorp-website"
compatibility_date = "2024-11-05"
main = "src/index.js"

# Workers Static Assets configuration
[assets]
directory = "./dist"
# Disable automatic html handling since we route everything through Worker
html_handling = "none"
# Use 404.html for not found pages
not_found_handling = "404-page"
# Route all requests through Worker first (allows transformation of legal/contact pages)
run_worker_first = true
# Binding for fetching assets from Worker code
binding = "ASSETS"

# D1 Database Binding (for CMS content)
[[d1_databases]]
binding = "DB"  # Use in Worker as env.DB
database_name = "highsurf-cms"
database_id = "9c2d47fb-8c36-45be-9afe-9ea8f1a3e00f"
preview_database_id = "9c2d47fb-8c36-45be-9afe-9ea8f1a3e00f"  # Use same for dev; replace with staging ID later

# Environment Variables (Secrets)
# Set via: npx wrangler secret put RESEND_API_KEY
# Required secrets:
# - RESEND_API_KEY: API key from Resend dashboard[](https://resend.com/api-keys)
#
# To set the secret:
# 1. Get your API key from https://resend.com/api-keys
# 2. Run: npx wrangler secret put RESEND_API_KEY
# 3. Paste the API key when prompted
# 4. Verify: npx wrangler secret list

# Cloudflare Workers AI Binding
[ai]
binding = "AI"